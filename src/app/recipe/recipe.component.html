<div class="recipeContent">
  <img class="logo" src="assets/img/logoGreen.png" />

  <div class="backButton" (click)="goBack()">
    <img src="assets/img/back.png" />
    <p>Recipe results</p>
  </div>

  <div class="recipeBox" *ngIf="recipe; else notFound">

    <!-- =======================
         HEADER
    ======================= -->
    <div class="recipeHeader">
      <div class="recipeInfo">
        <div class="cookingTime">
          <img src="assets/img/cookingTime.png" />
          <p>Cooking time</p>
          <p>{{ recipe.total_time_minutes }} min</p>
        </div>

        <h1>{{ recipe.recipe_name }}</h1>

        <div class="chefInfo">
          <p>Cooking persons:</p>
          <p>{{ recipe.helpers + 1 }}</p>
          <div class="chefIcons">
            <img
              *ngFor="let icon of getVisibleChefIcons()"
              [src]="icon"
              alt="Chef icon"
            />
          </div>
        </div>
      </div>

      <div class="quickInfo">
        <div class="dietSettings">
          <p class="diet" *ngFor="let pref of recipe.dietary_preferences">
            {{ pref }}
          </p>
          <p class="diet">{{ recipe.cook_time }}</p>
        </div>

        <p>Nutritional information</p>

        <div class="dietInfo">
          <div class="nutritionItem">
            <p>Calories</p>
            <p>{{ recipe.nutrition.calories }} kcal</p>
          </div>
          <div class="nutritionItem">
            <p>Protein</p>
            <p>{{ recipe.nutrition.protein_g }} g</p>
          </div>
          <div class="nutritionItem">
            <p>Carbohydrates</p>
            <p>{{ recipe.nutrition.carbs_g }} g</p>
          </div>
          <div class="nutritionItem">
            <p>Fat</p>
            <p>{{ recipe.nutrition.fat_g }} g</p>
          </div>
        </div>
      </div>
    </div>

    <!-- =======================
         INGREDIENTS SECTION
    ======================= -->
    <div class="recipeIngredients">
      <div>
        <img src="assets/img/recipeIngredients.png" />
        <h2>Ingredients</h2>
      </div>

      <div class="ingredientsLists">
        <div>
          <h3>Your ingredients</h3>
          <ul>
            <li *ngFor="let ingredient of recipe.ingredients.available">
              {{ ingredient.quantity }} {{ ingredient.unit }} {{ ingredient.name }}
            </li>
          </ul>
        </div>

        <div>
          <h3>Extra ingredients</h3>
          <ul>
            <li *ngFor="let ingredient of recipe.ingredients.added">
              {{ ingredient.quantity }} {{ ingredient.unit }} {{ ingredient.name }}
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- =======================
         INSTRUCTIONS SECTION (Neue Struktur)
    ======================= -->
    <div class="recipeDirections">
      <div>
        <img src="assets/img/recipeDirections.png" />
        <h2>Instructions</h2>
      </div>

      <div class="instructions-container">
        <div
          class="group-card"
          *ngFor="let group of recipe.instruction_groups"
        >
          <!-- Gruppen-Icon -->
          <img
            class="group-image"
            [src]="'assets/img/' + group.group_icon"
            alt="{{ group.group_title }}"
          />

          <!-- Gruppenname -->
          <h4>{{ group.group_title }}</h4>

          <!-- Schritte -->
          <div
            *ngFor="let instruction of group.instructions"
            class="instruction-step"
          >
            <strong>Step {{ instruction.step }}:</strong>
            <p>{{ instruction.text }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- =======================
         NOTES SECTION
    ======================= -->
    <div class="recipeNotes" *ngIf="recipe.notes">
      <h3>Notes</h3>
      <p>{{ recipe.notes }}</p>
    </div>
  </div>

  <!-- =======================
       NOT FOUND HANDLING
  ======================= -->
  <ng-template #notFound>
    <p>Recipe not found.</p>
  </ng-template>
</div>
